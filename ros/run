#!/bin/bash
# get where I am
MY_PATH=$(readlink -f  $(dirname $0))

# what type of terminal
TERMINAL=gnome-terminal
OPTION_TITLE='--title'
OPTION_WORKING_DIR='working-directory'
OPTION_GEOMETRY='--geometry=50x10+0+0'
OPTION_COMMAND='--command'

if [ $(which mate-terminal) ]; then
    TERMINAL=mate-terminal
fi

if [ $(which xfce4-terminal) ]; then
    TERMINAL=xfce4-terminal
fi

if [ $(which lxterminal) ]; then
    TERMINAL=lxterminal
fi

if [ $(which konsole) ]; then
    TERMINAL=konsole
    OPTION_WORKING_DIR='workdir'
    OPTION_GEOMETRY=''
    OPTION_COMMAND='-e'
    OPTION_TITLE='-T'
fi

# boot ros-master
${TERMINAL} ${OPTION_GEOMETRY} ${OPTION_TITLE}="roscore" --${OPTION_WORKING_DIR}=${MY_PATH} ${OPTION_COMMAND}="bash -c 'source ./devel/setup.bash; roscore'"&

# boot runtime_manager
${TERMINAL} ${OPTION_GEOMETRY} ${OPTION_TITLE}="runtime_manager" --${OPTION_WORKING_DIR}=${MY_PATH} ${OPTION_COMMAND}="bash -c 'source ./devel/setup.bash; rosrun runtime_manager runtime_manager_dialog.py'"
